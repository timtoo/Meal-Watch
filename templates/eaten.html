{% extends "base.html" %}
{% block header %}
  <link rel="stylesheet" href="/static/dinner/DataTables/css/jquery.dataTables.css">
{% endblock %}

{% block bluebar %}
<h2>Eaten: {% if foodtype %}({{foodtype.name}} only <a href="/dinner/{{request.user.id}}/eaten" style="color:darkred; font-size:80%">&#x2717;</a>){% endif %}</h2>
{% endblock %}
{% block content %}
<table class="table table-striped table-xnolines">
<thead>
<tr>
<th>Date</th>
<th>Meal Name</th>
<th>Type</th>
<th>Rating</th>
<th style="text-align: right">Times</th>
</tr>
</thead>
<tbody>
{% for m in eaten %}
<tr>
<td>{{ m.date | date:"Y-m-d" }}</td>
<td style="font-weight: 700; color:inherit"><a href="/dinner/{{user.id}}/meal/{{m.meal__id}}">{{ m.meal__name }}</a></td>
<td>{{ m.meal__foodtype__name }}<div class="circle" style="background-color: #{{m.meal__foodtype__color}}"></div></td>
<td>{{ m.meal__rating | default_if_none:" " }}</td>
<td style="text-align: right">{{ m.meal_count }}</td>
</tr>
{% endfor %}

</tbody>
</table>


{% endblock content %}

{% block bottom %}
<script src="/static/dinner/DataTables/js/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {
    $("table").dataTable({
            "bPaginate": true,
            'aaSorting': [],
            'iDisplayLength': 50,
            "fnInitComplete": function(oSettings, json) {
                    // move search box into header
                    $('#DataTables_Table_0_filter').prependTo('#subheader');
                      }
            });
});

</script>

{% endblock %}
